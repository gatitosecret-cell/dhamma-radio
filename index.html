<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Radio Dhamma Online</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        :root { --primary: #1a237e; --gold: #ffd700; --bg: #f8f9fa; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: 0; height: 100vh; overflow: hidden; }
        
        /* หน้าแรก (Home) */
        #home-screen { display: flex; flex-direction: column; height: 100%; padding: 20px; box-sizing: border-box; }
        .hero { text-align: center; padding: 40px 0; }
        .hero h1 { color: var(--primary); margin: 0; }
        .station-grid { display: grid; gap: 15px; flex: 1; }
        .card { background: white; border-radius: 20px; padding: 20px; display: flex; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; border: 1px solid #eee; }
        .card img { width: 60px; height: 60px; border-radius: 12px; margin-right: 20px; }
        .card b { font-size: 18px; color: var(--primary); }

        /* หน้าเล่น (Player) */
        #player-screen { display: none; flex-direction: column; height: 100%; text-align: center; background: white; }
        .back-btn { padding: 40px 20px 20px; text-align: left; color: var(--primary); font-weight: bold; cursor: pointer; }
        .player-content { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .player-img { width: 200px; height: 200px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .btn-play { width: 90px; height: 90px; background: #ff0000; border-radius: 50%; border: none; color: white; font-size: 35px; box-shadow: 0 5px 20px rgba(255,0,0,0.3); }

        /* กรอบเหนือ Bottom Bar */
        .mini-player { background: #f1f1f1; padding: 15px; font-weight: bold; font-size: 14px; border-top: 1px solid #ddd; }

        /* Bottom Bar */
        .bottom-bar { background: var(--primary); color: white; text-align: center; padding: 10px 0 calc(10px + env(safe-area-inset-bottom)); font-size: 12px; letter-spacing: 1px; }
    </style>
</head>
<body>

    <div id="home-screen">
        <div class="hero">
            <h1>ธรรมะเติมสุข ปลุกปัญญา</h1>
            <p>เลือกสถานีเพื่อรับฟัง</p>
        </div>
        <div class="station-grid">
            <div class="card" onclick="openPlayer('https://streaming1.zimple.cloud/stream/8001', 'วัดปากบ่อ', 'pakbo.png')">
                <img src="pakbo.png"> <div><b>วัดปากบ่อ</b><br><small>พอร์ต 8001</small></div>
            </div>
            <div class="card" onclick="openPlayer('https://streaming1.zimple.cloud/stream/4014', 'วัดทุ่งลานนา', 'thunglanna.png')">
                <img src="thunglanna.png"> <div><b>วัดทุ่งลานนา</b><br><small>พอร์ต 4014</small></div>
            </div>
            <div class="card" onclick="openPlayer('https://streaming1.zimple.cloud/stream/4106', 'วัดนายโรง', 'nairong.png')">
                <img src="nairong.png"> <div><b>วัดนายโรง</b><br><small>พอร์ต 4106</small></div>
            </div>
        </div>
    </div>

    <div id="player-screen">
        <div class="back-btn" onclick="goHome()"> ❮ ย้อนกลับไปหน้าหลัก </div>
        <div class="player-content">
            <img id="p-img" class="player-img" src="">
            <h2 id="p-name">ชื่อสถานี</h2>
            <p id="p-status">LIVE สัญญาณสด</p>
            <button class="btn-play" id="playBtn" onclick="togglePlay()">▶</button>
        </div>
        
        <div class="mini-player" id="miniLabel">กำลังเตรียมเล่น...</div>
        <div class="bottom-bar"> dev by chutintharo Ver. 1.0 </div>
    </div>

    <audio id="mainAudio"></audio>

    <script>
        const audio = document.getElementById('mainAudio');
        const playBtn = document.getElementById('playBtn');
        const home = document.getElementById('home-screen');
        const player = document.getElementById('player-screen');

        function openPlayer(url, name, img) {
            home.style.display = 'none';
            player.style.display = 'flex';
            
            document.getElementById('p-name').innerText = name;
            document.getElementById('p-img').src = img;
            document.getElementById('miniLabel').innerText = "กำลังรับฟัง: " + name;
            
            audio.src = url;
            audio.play();
            playBtn.innerText = "⏸";
        }

        function goHome() {
            player.style.display = 'none';
            home.style.display = 'flex';
            audio.pause();
        }

        function togglePlay() {
            if (audio.paused) {
                audio.play();
                playBtn.innerText = "⏸";
            } else {
                audio.pause();
                playBtn.innerText = "▶";
            }
        }
    </script>
</body>
</html>
